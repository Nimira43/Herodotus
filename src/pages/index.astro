---
import SearchForm from '@components/SearchForm.astro'
import MainLayout from '../layouts/MainLayout.astro'
import { HOMEPAGE_ARTICLE_LIMIT } from 'src/constants'
import { getCollection } from 'astro:content'
import type { CollectionEntry } from 'astro:content'
import ArticleCard from '@components/ArticleCard.astro'

const allBlogArticles: CollectionEntry<'blog'>[] = (await getCollection('blog'))
  .sort((
    a: CollectionEntry<'blog'>, 
    b: CollectionEntry<'blog'> 
  ) => 
    b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
  )

const mostRecentArticle: CollectionEntry<'blog'> = allBlogArticles[0]

const otherArticles: CollectionEntry<'blog'>[] = allBlogArticles.slice(1)

---

<MainLayout>
	<div class="grid grid-cols-1 gap-5 lg:grid-cols-2">
		<div>
			<h1 class="text-5xl font-medium mt-4 mb-8 leading-tight xl:text-6xl text-blue-500">Resources & Docs for Coders</h1>
			<SearchForm />
		</div>
		<div class="relative inline-block w-full sm:w-auto cursor-pointer rounded-2xl">
			<a href="#">
				<img 
					src="images/image-5.png" 
					alt="Article Image"
					class="w-full h-auto rounded-2xl"
				>
				<div class="absolute inset-0 flex flex-col items-center justify-center bg-black opacity-80 hover:opacity-85 transition duration-300 ease-in-out text-white text-center rounded-2xl">
					<div>
						<h2 class="text-2xl uppercase font-medium sm:text-3xl">Streamline Tasks, Slash Latency</h2>
						<p class="text-xl mt-4">14th July 2025</p>
						<div class="flex mt-4 justify-center">
							<span class="px-2 py-1 bg-blue-500 text-white uppercase font-medium rounded-sm text-xs mr-2">Tutorials</span>
							<span class="px-2 py-1 bg-blue-500 text-white uppercase font-medium rounded-sm text-xs mr-2">Linux</span>
						</div>
					</div>	
				</div>
			</a>
		</div>
	</div>
	<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
		{otherArticles.slice(0, HOMEPAGE_ARTICLE_LIMIT).map(article => (
			<ArticleCard article={article} />
		))}
		
	</div>
</MainLayout>	



